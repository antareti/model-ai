<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Imagen AI — Натурализм</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
    margin:0;
    background:#0a0a0a;
    color:#eaeaea;
    font-family:Arial,sans-serif;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
}
.app{
    width:440px;
    background:#121212;
    padding:20px;
    border-radius:14px;
    box-shadow:0 0 60px rgba(255,144,0,.15);
}
h1{
    text-align:center;
    color:#ff9000;
}
textarea{
    width:100%;
    height:80px;
    background:#1c1c1c;
    color:#fff;
    border:none;
    border-radius:10px;
    padding:10px;
    resize:none;
}
button{
    width:100%;
    margin-top:12px;
    padding:12px;
    font-size:16px;
    border:none;
    border-radius:10px;
    background:#ff9000;
    color:#000;
    cursor:pointer;
}
button:hover{background:#ffae33;}
canvas{
    width:100%;
    margin-top:15px;
    border-radius:12px;
    background:#000;
}
.footer{
    text-align:center;
    font-size:11px;
    opacity:.6;
    margin-top:6px;
}
</style>
</head>
<body>

<div class="app">
<h1>Imagen AI · Натурализм</h1>
<textarea id="prompt" placeholder="Пример: молодая женщина, мягкий дневной свет, реализм"></textarea>
<button onclick="generate()">Сгенерировать портрет</button>
<canvas id="canvas" width="512" height="512"></canvas>
<div class="footer">Offline • Procedural realism • Без API</div>
</div>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

function hash(str){
    let h=0;
    for(let i=0;i<str.length;i++){
        h=(h<<5)-h+str.charCodeAt(i);
        h|=0;
    }
    return Math.abs(h);
}

function mulberry32(a){
    return function(){
        let t=a+=0x6D2B79F5;
        t=Math.imul(t^t>>>15,t|1);
        t^=t+Math.imul(t^t>>>7,t|61);
        return((t^t>>>14)>>>0)/4294967296;
    }
}

function skinNoise(rand){
    for(let i=0;i<60000;i++){
        const x=rand()*512;
        const y=rand()*512;
        const v=220+rand()*25;
        ctx.fillStyle=`rgba(${v},${v-20},${v-30},0.03)`;
        ctx.fillRect(x,y,1,1);
    }
}

function generate(){
    const text=document.getElementById("prompt").value || "realistic woman portrait";
    const rand=mulberry32(hash("female_real_"+text));

    // Фон (студийный)
    const grad=ctx.createRadialGradient(256,200,50,256,256,400);
    grad.addColorStop(0,`rgb(${40+rand()*20},${40+rand()*20},${45+rand()*20})`);
    grad.addColorStop(1,"#050505");
    ctx.fillStyle=grad;
    ctx.fillRect(0,0,512,512);

    // Тень головы
    ctx.beginPath();
    ctx.ellipse(256,280,150,190,0,0,Math.PI*2);
    ctx.fillStyle="rgba(0,0,0,0.35)";
    ctx.fill();

    // Кожа
    ctx.beginPath();
    ctx.ellipse(256,260,135,175,0,0,Math.PI*2);
    ctx.fillStyle=`rgb(${210+rand()*15},${175+rand()*15},${155+rand()*15})`;
    ctx.fill();

    // Градиент объёма
    const faceLight=ctx.createRadialGradient(240,220,30,256,260,200);
    faceLight.addColorStop(0,"rgba(255,255,255,0.35)");
    faceLight.addColorStop(1,"rgba(0,0,0,0)");
    ctx.fillStyle=faceLight;
    ctx.beginPath();
    ctx.ellipse(256,260,135,175,0,0,Math.PI*2);
    ctx.fill();

    // Кожа — шум
    skinNoise(rand);

    // Глаза
    for(let i=-1;i<=1;i+=2){
        const ex=256+i*52;
        const ey=240+rand()*4;
        ctx.beginPath();
        ctx.ellipse(ex,ey,20,10,0,0,Math.PI*2);
        ctx.fillStyle="#fff";
        ctx.fill();

        ctx.beginPath();
        ctx.arc(ex,ey,6,0,Math.PI*2);
        ctx.fillStyle=`rgb(${80+rand()*50},${80+rand()*50},${80+rand()*50})`;
        ctx.fill();

        ctx.beginPath();
        ctx.arc(ex,ey,3,0,Math.PI*2);
        ctx.fillStyle="#000";
        ctx.fill();
    }

    // Нос
    ctx.beginPath();
    ctx.moveTo(256,250);
    ctx.lineTo(250,300);
    ctx.lineTo(256,305);
    ctx.strokeStyle="rgba(120,80,60,0.4)";
    ctx.lineWidth=2;
    ctx.stroke();

    // Губы
    ctx.beginPath();
    ctx.ellipse(256,320,30,9,0,0,Math.PI*2);
    ctx.fillStyle="rgba(170,80,90,0.75)";
    ctx.fill();

    // Волосы
    ctx.beginPath();
    ctx.ellipse(256,200,170,200,0,0,Math.PI*2);
    ctx.fillStyle=`rgba(${40+rand()*40},${30+rand()*30},${20+rand()*20},0.95)`;
    ctx.fill();

    // Волосы — текстура
    for(let i=0;i<4000;i++){
        ctx.fillStyle="rgba(0,0,0,0.08)";
        ctx.fillRect(rand()*512,rand()*300,1,8);
    }

    // Мягкий шум камеры
    for(let i=0;i<80000;i++){
        ctx.fillStyle="rgba(255,255,255,0.008)";
        ctx.fillRect(rand()*512,rand()*512,1,1);
    }
}
</script>

</body>
</html>
